app = "ocw-trader"
primary_region = "nrt"  # Tokyo â€” lowest latency to Binance

[build]
  dockerfile = "binance/Dockerfile"

[env]
  PYTHONUNBUFFERED = "1"
  BINANCE_PAPER = "true"
  LIVE_TRADING = "false"
  LOG_LEVEL = "INFO"

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = false
  auto_start_machines = true

[processes]
  trader = "python -u main.py --testnet"

[[vm]]
  size = "shared-cpu-1x"
  memory = "2048mb"
  processes = ["trader"]

# Single persistent volume for all state
[[mounts]]
  source = "trader_state"
  destination = "/state"
  processes = ["trader"]
